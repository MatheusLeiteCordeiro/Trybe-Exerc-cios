{"ast":null,"code":"'use strict';\n\nfunction _interopDefault(ex) {\n  return ex && typeof ex === 'object' && 'default' in ex ? ex['default'] : ex;\n}\n\nvar React = require('react');\n\nvar React__default = _interopDefault(React);\n\nvar PropTypes = _interopDefault(require('prop-types'));\n\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return {\n    x: rect.left,\n    y: rect.top\n  };\n}\n\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n\n    element = element.offsetParent;\n  }\n\n  return false;\n}\n\nfunction debounce(func, wait) {\n  var timeout = void 0;\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nfunction _possibleConstructorReturn(self, call) {\n  if (!self) {\n    throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n  }\n\n  return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self;\n}\n\nfunction _inherits(subClass, superClass) {\n  if (typeof superClass !== \"function\" && superClass !== null) {\n    throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass);\n  }\n\n  subClass.prototype = Object.create(superClass && superClass.prototype, {\n    constructor: {\n      value: subClass,\n      enumerable: false,\n      writable: true,\n      configurable: true\n    }\n  });\n  if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass;\n}\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {};\n\nfunction wikimedia(x, y, z, dpr) {\n  var retina = typeof dpr !== 'undefined' ? dpr >= 2 : typeof window !== 'undefined' && window.devicePixelRatio >= 2;\n  return 'https://maps.wikimedia.org/osm-intl/' + z + '/' + x + '/' + y + (retina ? '@2x' : '') + '.png';\n} // https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\n\n\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\n\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n} // minLat, maxLat, minLng, maxLng\n\n\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\nvar hasWindow = typeof window !== 'undefined';\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\nvar requestAnimationFrame = hasWindow ? window.requestAnimationFrame || window.setTimeout : function (callback) {\n  return callback();\n};\nvar cancelAnimationFrame = hasWindow ? window.cancelAnimationFrame || window.clearTimeout : function () {};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : ' ' + dpr + 'x');\n  }).join(', ');\n}\n\nvar Map = function (_Component) {\n  _inherits(Map, _Component);\n\n  function Map(props) {\n    _classCallCheck(this, Map);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n\n          return true;\n        }\n      }\n\n      return false;\n    };\n\n    _this.wa = function (e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    _this.wr = function (e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n\n      _this.wa('mouseup', _this.handleMouseUp);\n\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, {\n        passive: false\n      });\n\n      _this.wa('touchmove', _this.handleTouchMove, {\n        passive: false\n      });\n\n      _this.wa('touchend', _this.handleTouchEnd, {\n        passive: false\n      });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n\n      _this.wr('mouseup', _this.handleMouseUp);\n\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n\n      _this.wr('touchmove', _this.handleTouchMove);\n\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, {\n          passive: false\n        });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom) {\n      var fromProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var zoomAround = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var animationDuration = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : ANIMATION_TIME;\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n\n        _this._zoomTarget = zoom;\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height; // distance in pixels at the current zoom level\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom); // distance in pixels at the target zoom level (could be the same)\n\n\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget); // take the average between the two and divide by width or height to get the distance multiplier in screens\n\n\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height; // return the distance\n\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return {\n          centerStep: centerStep,\n          zoomStep: zoomStep\n        };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n        return {\n          centerStep: _centerStep,\n          zoomStep: zoomStep\n        };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n\n        _this.onAnimationStop();\n\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      // [minLat, maxLat, minLng, maxLng]\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom) {\n      var animationEnded = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n\n        var nextValues = _this.tileValues({\n          center: limitedCenter,\n          zoom: zoom,\n          width: _this.state.width,\n          height: _this.state.height\n        });\n\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + '-' + y + '-' + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({\n        center: limitedCenter,\n        zoom: zoom\n      }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n\n      if (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom); // x\n\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom); // y\n\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom); // x\n\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom); // y\n\n      var minMax = [minLat, maxLat, minLng, maxLng];\n      _this._minMaxCache = [zoom, width, height, minMax];\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n        var unloadedCount = Object.keys(_this._loadTracker).filter(function (k) {\n          return !_this._loadTracker[k];\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({\n            oldTiles: []\n          }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        } // added second finger and first one was in the area\n\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n        event.preventDefault();\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            // if the click started and ended at about\n            // the same place we can view it as a click\n            // and not prevent default behavior.\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              // don't throw immediately after releasing the second finger\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            // if somehow we have no midpoint for the two finger touch, just take the center of the map\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n            var zoomTarget = void 0; // do not zoom up/down if we must drag with 2 fingers and didn't change the zoom level\n\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n\n          _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n        } else {\n          _this._lastClick = performanceNow();\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n\n      var pixelDelta = _this.state.pixelDelta;\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n\n          _this.props.onClick({\n            event: event,\n            latLng: latLng,\n            pixel: pixel\n          });\n\n          _this.setState({\n            pixelDelta: null\n          }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({\n          timestamp: timestamp,\n          coords: coords\n        });\n\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n      var timestamp = performanceNow();\n\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: null,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.zoomPlusDelta();\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.zoom;\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({\n          center: center,\n          zoom: zoom,\n          bounds: bounds,\n          initial: !_this._boundsSynced\n        });\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey) {\n        event.preventDefault();\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({\n          showWarning: true,\n          warningType: warningType\n        });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({\n          showWarning: false\n        });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n    _this._mousePosition = null;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._touchStartPixel = null;\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null; // When users are using uncontrolled components we have to keep this\n    // so we can know if we should call onBoundsChanged\n\n    _this._lastZoom = props.defaultZoom ? props.defaultZoom : props.zoom;\n    _this._lastCenter = props.defaultCenter ? props.defaultCenter : props.center;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: props.width || props.defaultWidth,\n      height: props.height || props.defaultHeight,\n      zoomDelta: 0,\n      pixelDelta: null,\n      oldTiles: [],\n      showWarning: false,\n      warningType: null\n    };\n    return _this;\n  }\n\n  Map.prototype.componentDidMount = function componentDidMount() {\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      // A height:100% container div often results in height=0 being returned on mount.\n      // So ask again once everything is painted.\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n\n      this.bindResizeEvent();\n      this.bindWheelEvent();\n    }\n\n    this.syncToProps();\n  };\n\n  Map.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n      this.unbindWheelEvent();\n    }\n  };\n\n  Map.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({\n        width: this.props.width\n      });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({\n        height: this.props.height\n      });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      // if the user isn't controlling neither zoom nor center we don't have to update.\n      return;\n    }\n\n    if ((!this.props.center || this.props.center[0] === prevProps.center[0] && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      // if the user is controlling either zoom or center but nothing changed\n      // we don't have to update aswell\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n    var nextCenter = this.props.center || currentCenter; // prevent the rare null errors\n\n    var nextZoom = this.props.zoom || currentZoom;\n\n    if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n      this.setCenterZoomTarget(nextCenter, nextZoom, true);\n    }\n  }; // main logic when changing coordinates\n\n\n  Map.prototype.coordsInside = function coordsInside(pixel) {\n    var _state = this.state,\n        width = _state.width,\n        height = _state.height;\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n    var pos = parentPosition(parent);\n    var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n    return parent === element || parent.contains(element);\n  }; // https://www.bennadel.com/blog/1856-using-jquery-s-animate-step-callback-function-to-create-custom-animations.htm\n  // tools\n  // ref\n  // data to display the tiles\n\n\n  Map.prototype.tileValues = function tileValues(state) {\n    var center = state.center,\n        zoom = state.zoom,\n        pixelDelta = state.pixelDelta,\n        zoomDelta = state.zoomDelta,\n        width = state.width,\n        height = state.height;\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  }; // display the tiles\n\n\n  Map.prototype.renderTiles = function renderTiles() {\n    var _this2 = this;\n\n    var oldTiles = this.state.oldTiles;\n    var dprs = this.props.dprs;\n    var mapUrl = this.props.provider || wikimedia;\n\n    var _tileValues = this.tileValues(this.state),\n        tileMinX = _tileValues.tileMinX,\n        tileMaxX = _tileValues.tileMaxX,\n        tileMinY = _tileValues.tileMinY,\n        tileMaxY = _tileValues.tileMaxY,\n        tileCenterX = _tileValues.tileCenterX,\n        tileCenterY = _tileValues.tileCenterY,\n        roundedZoom = _tileValues.roundedZoom,\n        scaleWidth = _tileValues.scaleWidth,\n        scaleHeight = _tileValues.scaleHeight,\n        scale = _tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n\n      var _yMin = Math.max(old.tileMinY, 0);\n\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + '-' + y + '-' + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x13 = xMin; _x13 <= xMax; _x13++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x13 + '-' + _y + '-' + roundedZoom,\n          url: mapUrl(_x13, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x13, _y, roundedZoom),\n          left: (_x13 - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: 'scale(' + scale + ', ' + scale + ')',\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || '';\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: 'translate(' + left + 'px, ' + top + 'px)'\n    };\n    return React__default.createElement('div', {\n      style: boxStyle,\n      className: boxClassname\n    }, React__default.createElement('div', {\n      style: tilesStyle\n    }, tiles.map(function (tile) {\n      return React__default.createElement('img', {\n        key: tile.key,\n        src: tile.url,\n        srcSet: tile.srcSet,\n        width: tile.width,\n        height: tile.height,\n        onLoad: function onLoad() {\n          return _this2.imageLoaded(tile.key);\n        },\n        style: {\n          position: 'absolute',\n          left: tile.left,\n          top: tile.top,\n          willChange: 'transform',\n          transform: tile.transform,\n          transformOrigin: 'top left',\n          opacity: 1\n        }\n      });\n    })));\n  };\n\n  Map.prototype.renderOverlays = function renderOverlays() {\n    var _this3 = this;\n\n    var _state2 = this.state,\n        width = _state2.width,\n        height = _state2.height,\n        center = _state2.center;\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n    var childrenWithProps = React__default.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (typeof child.type === 'string') {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n      var c = _this3.latLngToPixel(anchor || position || center);\n\n      return React__default.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this3.latLngToPixel,\n        pixelToLatLng: _this3.pixelToLatLng,\n        mapState: mapState\n      });\n    });\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: 0,\n      left: 0\n    };\n    return React__default.createElement('div', {\n      style: childrenStyle\n    }, childrenWithProps);\n  };\n\n  Map.prototype.renderAttribution = function renderAttribution() {\n    var _props = this.props,\n        attribution = _props.attribution,\n        attributionPrefix = _props.attributionPrefix;\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n    return React__default.createElement('div', {\n      key: 'attr',\n      className: 'pigeon-attribution',\n      style: style\n    }, attributionPrefix === false ? null : React__default.createElement('span', null, attributionPrefix || React__default.createElement('a', {\n      href: 'https://pigeon-maps.js.org/',\n      style: linkStyle\n    }, 'Pigeon'), ' | '), attribution || React__default.createElement('span', null, ' © ', React__default.createElement('a', {\n      href: 'https://www.openstreetmap.org/copyright',\n      style: linkStyle\n    }, 'OpenStreetMap'), ' contributors'));\n  };\n\n  Map.prototype.renderWarning = function renderWarning() {\n    var _props2 = this.props,\n        metaWheelZoom = _props2.metaWheelZoom,\n        metaWheelZoomWarning = _props2.metaWheelZoomWarning,\n        twoFingerDrag = _props2.twoFingerDrag,\n        twoFingerDragWarning = _props2.twoFingerDragWarning,\n        warningZIndex = _props2.warningZIndex;\n    var _state3 = this.state,\n        showWarning = _state3.showWarning,\n        warningType = _state3.warningType,\n        width = _state3.width,\n        height = _state3.height;\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : '⊞';\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n      return React__default.createElement('div', {\n        style: style\n      }, warningText.replace('META', meta));\n    } else {\n      return null;\n    }\n  };\n\n  Map.prototype.render = function render() {\n    var _props3 = this.props,\n        touchEvents = _props3.touchEvents,\n        twoFingerDrag = _props3.twoFingerDrag;\n    var _state4 = this.state,\n        width = _state4.width,\n        height = _state4.height;\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n    var hasSize = !!(width && height);\n    return React__default.createElement('div', {\n      style: containerStyle,\n      ref: this.setRef\n    }, hasSize && this.renderTiles(), hasSize && this.renderOverlays(), hasSize && this.renderAttribution(), hasSize && this.renderWarning());\n  };\n\n  return Map;\n}(React.Component);\n\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META+wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\nprocess.env.NODE_ENV !== \"production\" ? Map.propTypes = {\n  center: PropTypes.array,\n  defaultCenter: PropTypes.array,\n  zoom: PropTypes.number,\n  defaultZoom: PropTypes.number,\n  width: PropTypes.number,\n  defaultWidth: PropTypes.number,\n  height: PropTypes.number,\n  defaultHeight: PropTypes.number,\n  provider: PropTypes.func,\n  dprs: PropTypes.array,\n  children: PropTypes.node,\n  animate: PropTypes.bool,\n  animateMaxScreens: PropTypes.number,\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n  metaWheelZoom: PropTypes.bool,\n  metaWheelZoomWarning: PropTypes.string,\n  twoFingerDrag: PropTypes.bool,\n  twoFingerDragWarning: PropTypes.string,\n  warningZIndex: PropTypes.number,\n  attribution: PropTypes.any,\n  attributionPrefix: PropTypes.any,\n  zoomSnap: PropTypes.bool,\n  mouseEvents: PropTypes.bool,\n  touchEvents: PropTypes.bool,\n  onClick: PropTypes.func,\n  onBoundsChanged: PropTypes.func,\n  onAnimationStart: PropTypes.func,\n  onAnimationStop: PropTypes.func,\n  // will be set to \"edge\" from v0.12 onward, defaulted to \"center\" before\n  limitBounds: PropTypes.oneOf(['center', 'edge'])\n} : void 0;\nmodule.exports = Map;","map":{"version":3,"names":["_interopDefault","ex","React","require","React__default","PropTypes","parentPosition","element","rect","getBoundingClientRect","x","left","y","top","parentHasClass","className","classList","contains","offsetParent","debounce","func","wait","timeout","_len","arguments","length","args","Array","_key","context","clearTimeout","setTimeout","apply","_classCallCheck","instance","Constructor","TypeError","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","ANIMATION_TIME","DIAGONAL_THROW_TIME","SCROLL_PIXELS_FOR_ZOOM_LEVEL","MIN_DRAG_FOR_THROW","CLICK_TOLERANCE","DOUBLE_CLICK_DELAY","DEBOUNCE_DELAY","PINCH_RELEASE_THROW_DELAY","WARNING_DISPLAY_TIMEOUT","NOOP","wikimedia","z","dpr","retina","window","devicePixelRatio","lng2tile","lon","zoom","Math","pow","lat2tile","lat","log","tan","PI","cos","tile2lng","tile2lat","n","atan","exp","getMousePixel","dom","event","parent","clientX","clientY","easeOutQuad","t","absoluteMinMax","hasWindow","performanceNow","performance","now","timeStart","Date","getTime","requestAnimationFrame","callback","cancelAnimationFrame","srcSet","dprs","url","map","join","Map","_Component","props","_this","updateWidthHeight","_containerRef","width","height","setState","wa","e","o","addEventListener","wr","removeEventListener","bindMouseEvents","handleMouseDown","handleMouseUp","handleMouseMove","bindTouchEvents","handleTouchStart","passive","handleTouchMove","handleTouchEnd","unbindMouseEvents","unbindTouchEvents","bindResizeEvent","unbindResizeEvent","bindWheelEvent","handleWheel","unbindWheelEvent","setCenterZoomTarget","center","fromProps","undefined","zoomAround","animationDuration","animate","distanceInScreens","state","animateMaxScreens","_isAnimating","_animFrame","_this$animationStep","animationStep","centerStep","zoomStep","_centerStart","_zoomStart","limitCenterAtZoom","_lastCenter","_lastZoom","onAnimationStart","_animationStart","_animationEnd","_zoomAround","_centerTarget","calculateZoomCenter","_zoomTarget","stopAnimating","_center","setCenterZoom","centerTarget","zoomTarget","_this$state","l1","latLngToPixel","l2","z1","z2","w","abs","h","sqrt","timestamp","progress","max","percentage","zoomDiff","_centerStep","onAnimationStop","_this$animationStep2","minMax","getBoundsMinMax","min","isNaN","animationEnded","limitedCenter","round","tileValues","nextValues","oldTiles","filter","roundedZoom","concat","loadTracker","tileMinX","tileMaxX","tileMinY","tileMaxY","key","_loadTracker","maybeZoom","maybeCenter","syncToProps","limitBounds","_this$state2","_minMaxCache","pixelsAtZoom","minLng","minLat","maxLng","maxLat","imageLoaded","unloadedCount","keys","k","target","touches","touch","pixel","coordsInside","_touchStartPixel","twoFingerDrag","_lastTap","preventDefault","latLngNow","pixelToLatLng","minZoom","maxZoom","trackMoveEvents","stopTrackingMoveEvents","pixelDelta","zoomDelta","sendDeltaChange","t1","t2","_touchStartMidPoint","_touchStartDistance","showWarning","_this$state3","midPoint","midPointDiff","distance","log2","scale","centerDiffDiff","_this$props","zoomSnap","_this$sendDeltaChange","clearWarning","oldTouchPixel","newTouchPixel","changedTouches","_secondTouchEnd","throwAfterMoving","latLng","ceil","floor","_zoom","button","_lastClick","_mousePosition","_mouseDown","_dragStart","onClick","_this$sendDeltaChange2","_moveEvents","coords","push","shift","_this$state4","lastEvent","deltaMs","delta","diagonal","throwTime","lng","_this$state5","getBounds","zoomPlusDelta","_this$state6","ne","sw","onBoundsChanged","bounds","initial","_boundsSynced","_this$props2","mouseEvents","metaWheelZoom","metaKey","addToZoom","deltaY","stillToAdd","zoomAroundMouse","_lastWheel","warningType","_warningClearTimeout","_this$props3","_this$state7","pointDiff","tileX","tileY","_this$state8","tileCenterX","tileCenterY","oldZoom","newZoom","_this$state9","pixelBefore","pixelAfter","newCenter","setRef","defaultZoom","defaultCenter","defaultWidth","defaultHeight","componentDidMount","touchEvents","componentWillUnmount","componentDidUpdate","prevProps","currentCenter","currentZoom","nextCenter","nextZoom","_state","pos","document","elementFromPoint","scaleWidth","scaleHeight","halfWidth","halfHeight","renderTiles","_this2","mapUrl","provider","_tileValues","tiles","i","old","xDiff","yDiff","_xMin","_yMin","_xMax","_yMax","active","xMin","yMin","xMax","yMax","_x13","_y","boxStyle","position","overflow","willChange","transform","transformOrigin","boxClassname","tilesStyle","createElement","style","tile","src","onLoad","opacity","renderOverlays","_this3","_state2","mapState","childrenWithProps","Children","children","child","type","_child$props","anchor","offset","c","cloneElement","childrenStyle","renderAttribution","_props","attribution","attributionPrefix","bottom","right","fontSize","padding","background","fontFamily","color","linkStyle","textDecoration","href","renderWarning","_props2","metaWheelZoomWarning","twoFingerDragWarning","warningZIndex","_state3","pointerEvents","transition","display","justifyContent","alignItems","textAlign","zIndex","meta","navigator","platform","toUpperCase","indexOf","warningText","replace","render","_props3","_state4","containerStyle","touchAction","hasSize","ref","Component","defaultProps","process","env","NODE_ENV","propTypes","array","number","node","bool","string","any","oneOf","module","exports"],"sources":["/home/matheus/Dropbox/Trybe/Trybe-Exercícios/Desenvolvimento-Front-End/Sessão-09-Context-API-e-React-Hookes/dia-01-Context-API-do-React/my_app/node_modules/pigeon-maps/lib/index.js"],"sourcesContent":["'use strict';\n\nfunction _interopDefault (ex) { return (ex && (typeof ex === 'object') && 'default' in ex) ? ex['default'] : ex; }\n\nvar React = require('react');\nvar React__default = _interopDefault(React);\nvar PropTypes = _interopDefault(require('prop-types'));\n\nfunction parentPosition(element) {\n  var rect = element.getBoundingClientRect();\n  return { x: rect.left, y: rect.top };\n}\n\nfunction parentHasClass(element, className) {\n  while (element) {\n    if (element.classList && element.classList.contains(className)) {\n      return true;\n    }\n    element = element.offsetParent;\n  }\n\n  return false;\n}\n\nfunction debounce(func, wait) {\n  var timeout = void 0;\n  return function () {\n    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    var context = this;\n    clearTimeout(timeout);\n    timeout = setTimeout(function () {\n      return func.apply(context, args);\n    }, wait);\n  };\n}\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\nvar ANIMATION_TIME = 300;\nvar DIAGONAL_THROW_TIME = 1500;\nvar SCROLL_PIXELS_FOR_ZOOM_LEVEL = 150;\nvar MIN_DRAG_FOR_THROW = 40;\nvar CLICK_TOLERANCE = 2;\nvar DOUBLE_CLICK_DELAY = 300;\nvar DEBOUNCE_DELAY = 60;\nvar PINCH_RELEASE_THROW_DELAY = 300;\nvar WARNING_DISPLAY_TIMEOUT = 300;\n\nvar NOOP = function NOOP() {};\n\nfunction wikimedia(x, y, z, dpr) {\n  var retina = typeof dpr !== 'undefined' ? dpr >= 2 : typeof window !== 'undefined' && window.devicePixelRatio >= 2;\n  return 'https://maps.wikimedia.org/osm-intl/' + z + '/' + x + '/' + y + (retina ? '@2x' : '') + '.png';\n}\n\n// https://wiki.openstreetmap.org/wiki/Slippy_map_tilenames\nvar lng2tile = function lng2tile(lon, zoom) {\n  return (lon + 180) / 360 * Math.pow(2, zoom);\n};\nvar lat2tile = function lat2tile(lat, zoom) {\n  return (1 - Math.log(Math.tan(lat * Math.PI / 180) + 1 / Math.cos(lat * Math.PI / 180)) / Math.PI) / 2 * Math.pow(2, zoom);\n};\n\nfunction tile2lng(x, z) {\n  return x / Math.pow(2, z) * 360 - 180;\n}\n\nfunction tile2lat(y, z) {\n  var n = Math.PI - 2 * Math.PI * y / Math.pow(2, z);\n  return 180 / Math.PI * Math.atan(0.5 * (Math.exp(n) - Math.exp(-n)));\n}\n\nfunction getMousePixel(dom, event) {\n  var parent = parentPosition(dom);\n  return [event.clientX - parent.x, event.clientY - parent.y];\n}\n\nfunction easeOutQuad(t) {\n  return t * (2 - t);\n}\n\n// minLat, maxLat, minLng, maxLng\nvar absoluteMinMax = [tile2lat(Math.pow(2, 10), 10), tile2lat(0, 10), tile2lng(0, 10), tile2lng(Math.pow(2, 10), 10)];\n\nvar hasWindow = typeof window !== 'undefined';\n\nvar performanceNow = hasWindow && window.performance && window.performance.now ? function () {\n  return window.performance.now();\n} : function () {\n  var timeStart = new Date().getTime();\n  return function () {\n    return new Date().getTime() - timeStart;\n  };\n}();\n\nvar requestAnimationFrame = hasWindow ? window.requestAnimationFrame || window.setTimeout : function (callback) {\n  return callback();\n};\nvar cancelAnimationFrame = hasWindow ? window.cancelAnimationFrame || window.clearTimeout : function () {};\n\nfunction srcSet(dprs, url, x, y, z) {\n  if (!dprs || dprs.length === 0) {\n    return '';\n  }\n  return dprs.map(function (dpr) {\n    return url(x, y, z, dpr) + (dpr === 1 ? '' : ' ' + dpr + 'x');\n  }).join(', ');\n}\n\nvar Map = function (_Component) {\n  _inherits(Map, _Component);\n\n  function Map(props) {\n    _classCallCheck(this, Map);\n\n    var _this = _possibleConstructorReturn(this, _Component.call(this, props));\n\n    _this.updateWidthHeight = function () {\n      if (_this._containerRef) {\n        var rect = _this._containerRef.getBoundingClientRect();\n\n        if (rect && rect.width > 0 && rect.height > 0) {\n          _this.setState({\n            width: rect.width,\n            height: rect.height\n          });\n          return true;\n        }\n      }\n      return false;\n    };\n\n    _this.wa = function (e, t, o) {\n      return window.addEventListener(e, t, o);\n    };\n\n    _this.wr = function (e, t) {\n      return window.removeEventListener(e, t);\n    };\n\n    _this.bindMouseEvents = function () {\n      _this.wa('mousedown', _this.handleMouseDown);\n      _this.wa('mouseup', _this.handleMouseUp);\n      _this.wa('mousemove', _this.handleMouseMove);\n    };\n\n    _this.bindTouchEvents = function () {\n      _this.wa('touchstart', _this.handleTouchStart, { passive: false });\n      _this.wa('touchmove', _this.handleTouchMove, { passive: false });\n      _this.wa('touchend', _this.handleTouchEnd, { passive: false });\n    };\n\n    _this.unbindMouseEvents = function () {\n      _this.wr('mousedown', _this.handleMouseDown);\n      _this.wr('mouseup', _this.handleMouseUp);\n      _this.wr('mousemove', _this.handleMouseMove);\n    };\n\n    _this.unbindTouchEvents = function () {\n      _this.wr('touchstart', _this.handleTouchStart);\n      _this.wr('touchmove', _this.handleTouchMove);\n      _this.wr('touchend', _this.handleTouchEnd);\n    };\n\n    _this.bindResizeEvent = function () {\n      _this.wa('resize', _this.updateWidthHeight);\n    };\n\n    _this.unbindResizeEvent = function () {\n      _this.wr('resize', _this.updateWidthHeight);\n    };\n\n    _this.bindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.addEventListener('wheel', _this.handleWheel, { passive: false });\n      }\n    };\n\n    _this.unbindWheelEvent = function () {\n      if (_this._containerRef) {\n        _this._containerRef.removeEventListener('wheel', _this.handleWheel);\n      }\n    };\n\n    _this.setCenterZoomTarget = function (center, zoom) {\n      var fromProps = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n      var zoomAround = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : null;\n      var animationDuration = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : ANIMATION_TIME;\n\n      if (_this.props.animate && (!fromProps || _this.distanceInScreens(center, zoom, _this.state.center, _this.state.zoom) <= _this.props.animateMaxScreens)) {\n        if (_this._isAnimating) {\n          cancelAnimationFrame(_this._animFrame);\n\n          var _this$animationStep = _this.animationStep(performanceNow()),\n              centerStep = _this$animationStep.centerStep,\n              zoomStep = _this$animationStep.zoomStep;\n\n          _this._centerStart = centerStep;\n          _this._zoomStart = zoomStep;\n        } else {\n          _this._isAnimating = true;\n          _this._centerStart = _this.limitCenterAtZoom([_this._lastCenter[0], _this._lastCenter[1]], _this._lastZoom);\n          _this._zoomStart = _this._lastZoom;\n          _this.onAnimationStart();\n        }\n\n        _this._animationStart = performanceNow();\n        _this._animationEnd = _this._animationStart + animationDuration;\n\n        if (zoomAround) {\n          _this._zoomAround = zoomAround;\n          _this._centerTarget = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n        } else {\n          _this._zoomAround = null;\n          _this._centerTarget = center;\n        }\n        _this._zoomTarget = zoom;\n\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      } else {\n        _this.stopAnimating();\n\n        if (zoomAround) {\n          var _center = _this.calculateZoomCenter(_this._lastCenter, zoomAround, _this._lastZoom, zoom);\n          _this.setCenterZoom(_center, zoom, fromProps);\n        } else {\n          _this.setCenterZoom(center, zoom, fromProps);\n        }\n      }\n    };\n\n    _this.distanceInScreens = function (centerTarget, zoomTarget, center, zoom) {\n      var _this$state = _this.state,\n          width = _this$state.width,\n          height = _this$state.height;\n\n      // distance in pixels at the current zoom level\n\n      var l1 = _this.latLngToPixel(center, center, zoom);\n      var l2 = _this.latLngToPixel(centerTarget, center, zoom);\n\n      // distance in pixels at the target zoom level (could be the same)\n      var z1 = _this.latLngToPixel(center, center, zoomTarget);\n      var z2 = _this.latLngToPixel(centerTarget, center, zoomTarget);\n\n      // take the average between the two and divide by width or height to get the distance multiplier in screens\n      var w = (Math.abs(l1[0] - l2[0]) + Math.abs(z1[0] - z2[0])) / 2 / width;\n      var h = (Math.abs(l1[1] - l2[1]) + Math.abs(z1[1] - z2[1])) / 2 / height;\n\n      // return the distance\n      return Math.sqrt(w * w + h * h);\n    };\n\n    _this.animationStep = function (timestamp) {\n      var length = _this._animationEnd - _this._animationStart;\n      var progress = Math.max(timestamp - _this._animationStart, 0);\n      var percentage = easeOutQuad(progress / length);\n\n      var zoomDiff = (_this._zoomTarget - _this._zoomStart) * percentage;\n      var zoomStep = _this._zoomStart + zoomDiff;\n\n      if (_this._zoomAround) {\n        var centerStep = _this.calculateZoomCenter(_this._centerStart, _this._zoomAround, _this._zoomStart, zoomStep);\n\n        return { centerStep: centerStep, zoomStep: zoomStep };\n      } else {\n        var _centerStep = [_this._centerStart[0] + (_this._centerTarget[0] - _this._centerStart[0]) * percentage, _this._centerStart[1] + (_this._centerTarget[1] - _this._centerStart[1]) * percentage];\n\n        return { centerStep: _centerStep, zoomStep: zoomStep };\n      }\n    };\n\n    _this.animate = function (timestamp) {\n      if (timestamp >= _this._animationEnd) {\n        _this._isAnimating = false;\n        _this.setCenterZoom(_this._centerTarget, _this._zoomTarget, true);\n        _this.onAnimationStop();\n      } else {\n        var _this$animationStep2 = _this.animationStep(timestamp),\n            centerStep = _this$animationStep2.centerStep,\n            zoomStep = _this$animationStep2.zoomStep;\n\n        _this.setCenterZoom(centerStep, zoomStep);\n        _this._animFrame = requestAnimationFrame(_this.animate);\n      }\n    };\n\n    _this.stopAnimating = function () {\n      if (_this._isAnimating) {\n        _this._isAnimating = false;\n        _this.onAnimationStop();\n        cancelAnimationFrame(_this._animFrame);\n      }\n    };\n\n    _this.limitCenterAtZoom = function (center, zoom) {\n      // [minLat, maxLat, minLng, maxLng]\n      var minMax = _this.getBoundsMinMax(zoom || _this.state.zoom);\n\n      return [Math.max(Math.min(isNaN(center[0]) ? _this.state.center[0] : center[0], minMax[1]), minMax[0]), Math.max(Math.min(isNaN(center[1]) ? _this.state.center[1] : center[1], minMax[3]), minMax[2])];\n    };\n\n    _this.onAnimationStart = function () {\n      _this.props.onAnimationStart && _this.props.onAnimationStart();\n    };\n\n    _this.onAnimationStop = function () {\n      _this.props.onAnimationStop && _this.props.onAnimationStop();\n    };\n\n    _this.setCenterZoom = function (center, zoom) {\n      var animationEnded = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n      var limitedCenter = _this.limitCenterAtZoom(center, zoom);\n\n      if (Math.round(_this.state.zoom) !== Math.round(zoom)) {\n        var tileValues = _this.tileValues(_this.state);\n        var nextValues = _this.tileValues({ center: limitedCenter, zoom: zoom, width: _this.state.width, height: _this.state.height });\n        var oldTiles = _this.state.oldTiles;\n\n        _this.setState({\n          oldTiles: oldTiles.filter(function (o) {\n            return o.roundedZoom !== tileValues.roundedZoom;\n          }).concat(tileValues)\n        }, NOOP);\n\n        var loadTracker = {};\n\n        for (var x = nextValues.tileMinX; x <= nextValues.tileMaxX; x++) {\n          for (var y = nextValues.tileMinY; y <= nextValues.tileMaxY; y++) {\n            var key = x + '-' + y + '-' + nextValues.roundedZoom;\n            loadTracker[key] = false;\n          }\n        }\n\n        _this._loadTracker = loadTracker;\n      }\n\n      _this.setState({ center: limitedCenter, zoom: zoom }, NOOP);\n\n      var maybeZoom = _this.props.zoom ? _this.props.zoom : _this._lastZoom;\n      var maybeCenter = _this.props.center ? _this.props.center : _this._lastCenter;\n      if (animationEnded || Math.abs(maybeZoom - zoom) > 0.001 || Math.abs(maybeCenter[0] - limitedCenter[0]) > 0.00001 || Math.abs(maybeCenter[1] - limitedCenter[1]) > 0.00001) {\n        _this._lastZoom = zoom;\n        _this._lastCenter = [].concat(limitedCenter);\n        _this.syncToProps(limitedCenter, zoom);\n      }\n    };\n\n    _this.getBoundsMinMax = function (zoom) {\n      if (_this.props.limitBounds === 'center') {\n        return absoluteMinMax;\n      }\n\n      var _this$state2 = _this.state,\n          width = _this$state2.width,\n          height = _this$state2.height;\n\n\n      if (_this._minMaxCache && _this._minMaxCache[0] === zoom && _this._minMaxCache[1] === width && _this._minMaxCache[2] === height) {\n        return _this._minMaxCache[3];\n      }\n\n      var pixelsAtZoom = Math.pow(2, zoom) * 256;\n\n      var minLng = width > pixelsAtZoom ? 0 : tile2lng(width / 512, zoom); // x\n      var minLat = height > pixelsAtZoom ? 0 : tile2lat(Math.pow(2, zoom) - height / 512, zoom); // y\n\n      var maxLng = width > pixelsAtZoom ? 0 : tile2lng(Math.pow(2, zoom) - width / 512, zoom); // x\n      var maxLat = height > pixelsAtZoom ? 0 : tile2lat(height / 512, zoom); // y\n\n      var minMax = [minLat, maxLat, minLng, maxLng];\n\n      _this._minMaxCache = [zoom, width, height, minMax];\n\n      return minMax;\n    };\n\n    _this.imageLoaded = function (key) {\n      if (_this._loadTracker && key in _this._loadTracker) {\n        _this._loadTracker[key] = true;\n\n        var unloadedCount = Object.keys(_this._loadTracker).filter(function (k) {\n          return !_this._loadTracker[k];\n        }).length;\n\n        if (unloadedCount === 0) {\n          _this.setState({ oldTiles: [] }, NOOP);\n        }\n      }\n    };\n\n    _this.handleTouchStart = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      if (event.target && parentHasClass(event.target, 'pigeon-drag-block')) {\n        return;\n      }\n      if (event.touches.length === 1) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.coordsInside(pixel)) {\n          _this._touchStartPixel = [pixel];\n\n          if (!_this.props.twoFingerDrag) {\n            _this.stopAnimating();\n\n            if (_this._lastTap && performanceNow() - _this._lastTap < DOUBLE_CLICK_DELAY) {\n              event.preventDefault();\n              var latLngNow = _this.pixelToLatLng(_this._touchStartPixel[0]);\n              _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n            } else {\n              _this._lastTap = performanceNow();\n              _this.trackMoveEvents(pixel);\n            }\n          }\n        }\n        // added second finger and first one was in the area\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        event.preventDefault();\n\n        _this.stopTrackingMoveEvents();\n\n        if (_this.state.pixelDelta || _this.state.zoomDelta) {\n          _this.sendDeltaChange();\n        }\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n\n        _this._touchStartPixel = [t1, t2];\n        _this._touchStartMidPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        _this._touchStartDistance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n      }\n    };\n\n    _this.handleTouchMove = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n      if (event.touches.length === 1 && _this._touchStartPixel) {\n        var touch = event.touches[0];\n        var pixel = getMousePixel(_this._containerRef, touch);\n\n        if (_this.props.twoFingerDrag) {\n          if (_this.coordsInside(pixel)) {\n            _this.showWarning('fingers');\n          }\n        } else {\n          event.preventDefault();\n          _this.trackMoveEvents(pixel);\n\n          _this.setState({\n            pixelDelta: [pixel[0] - _this._touchStartPixel[0][0], pixel[1] - _this._touchStartPixel[0][1]]\n          }, NOOP);\n        }\n      } else if (event.touches.length === 2 && _this._touchStartPixel) {\n        var _this$state3 = _this.state,\n            width = _this$state3.width,\n            height = _this$state3.height,\n            zoom = _this$state3.zoom;\n\n\n        event.preventDefault();\n\n        var t1 = getMousePixel(_this._containerRef, event.touches[0]);\n        var t2 = getMousePixel(_this._containerRef, event.touches[1]);\n\n        var midPoint = [(t1[0] + t2[0]) / 2, (t1[1] + t2[1]) / 2];\n        var midPointDiff = [midPoint[0] - _this._touchStartMidPoint[0], midPoint[1] - _this._touchStartMidPoint[1]];\n\n        var distance = Math.sqrt(Math.pow(t1[0] - t2[0], 2) + Math.pow(t1[1] - t2[1], 2));\n\n        var zoomDelta = Math.max(_this.props.minZoom, Math.min(_this.props.maxZoom, zoom + Math.log2(distance / _this._touchStartDistance))) - zoom;\n        var scale = Math.pow(2, zoomDelta);\n\n        var centerDiffDiff = [(width / 2 - midPoint[0]) * (scale - 1), (height / 2 - midPoint[1]) * (scale - 1)];\n\n        _this.setState({\n          zoomDelta: zoomDelta,\n          pixelDelta: [centerDiffDiff[0] + midPointDiff[0] * scale, centerDiffDiff[1] + midPointDiff[1] * scale]\n        }, NOOP);\n      }\n    };\n\n    _this.handleTouchEnd = function (event) {\n      if (!_this._containerRef) {\n        _this._touchStartPixel = null;\n        return;\n      }\n      if (_this._touchStartPixel) {\n        var _this$props = _this.props,\n            zoomSnap = _this$props.zoomSnap,\n            twoFingerDrag = _this$props.twoFingerDrag,\n            minZoom = _this$props.minZoom,\n            maxZoom = _this$props.maxZoom;\n        var zoomDelta = _this.state.zoomDelta;\n\n        var _this$sendDeltaChange = _this.sendDeltaChange(),\n            center = _this$sendDeltaChange.center,\n            zoom = _this$sendDeltaChange.zoom;\n\n        if (event.touches.length === 0) {\n          if (twoFingerDrag) {\n            _this.clearWarning();\n          } else {\n            // if the click started and ended at about\n            // the same place we can view it as a click\n            // and not prevent default behavior.\n            var oldTouchPixel = _this._touchStartPixel[0];\n            var newTouchPixel = getMousePixel(_this._containerRef, event.changedTouches[0]);\n\n            if (Math.abs(oldTouchPixel[0] - newTouchPixel[0]) > CLICK_TOLERANCE || Math.abs(oldTouchPixel[1] - newTouchPixel[1]) > CLICK_TOLERANCE) {\n              // don't throw immediately after releasing the second finger\n              if (!_this._secondTouchEnd || performanceNow() - _this._secondTouchEnd > PINCH_RELEASE_THROW_DELAY) {\n                event.preventDefault();\n                _this.throwAfterMoving(newTouchPixel, center, zoom);\n              }\n            }\n\n            _this._touchStartPixel = null;\n            _this._secondTouchEnd = null;\n          }\n        } else if (event.touches.length === 1) {\n          event.preventDefault();\n          var touch = getMousePixel(_this._containerRef, event.touches[0]);\n\n          _this._secondTouchEnd = performanceNow();\n          _this._touchStartPixel = [touch];\n          _this.trackMoveEvents(touch);\n\n          if (zoomSnap) {\n            // if somehow we have no midpoint for the two finger touch, just take the center of the map\n            var latLng = _this._touchStartMidPoint ? _this.pixelToLatLng(_this._touchStartMidPoint) : _this.state.center;\n\n            var zoomTarget = void 0;\n\n            // do not zoom up/down if we must drag with 2 fingers and didn't change the zoom level\n            if (twoFingerDrag && Math.round(_this.state.zoom) === Math.round(_this.state.zoom + zoomDelta)) {\n              zoomTarget = Math.round(_this.state.zoom);\n            } else {\n              zoomTarget = zoomDelta > 0 ? Math.ceil(_this.state.zoom) : Math.floor(_this.state.zoom);\n            }\n            var _zoom = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n            _this.setCenterZoomTarget(latLng, _zoom, false, latLng);\n          }\n        }\n      }\n    };\n\n    _this.handleMouseDown = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      var pixel = getMousePixel(_this._containerRef, event);\n\n      if (event.button === 0 && (!event.target || !parentHasClass(event.target, 'pigeon-drag-block')) && _this.coordsInside(pixel)) {\n        _this.stopAnimating();\n        event.preventDefault();\n\n        if (_this._lastClick && performanceNow() - _this._lastClick < DOUBLE_CLICK_DELAY) {\n          var latLngNow = _this.pixelToLatLng(_this._mousePosition || pixel);\n          _this.setCenterZoomTarget(null, Math.max(_this.props.minZoom, Math.min(_this.state.zoom + 1, _this.props.maxZoom)), false, latLngNow);\n        } else {\n          _this._lastClick = performanceNow();\n\n          _this._mouseDown = true;\n          _this._dragStart = pixel;\n          _this.trackMoveEvents(pixel);\n        }\n      }\n    };\n\n    _this.handleMouseMove = function (event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (_this._mouseDown && _this._dragStart) {\n        _this.trackMoveEvents(_this._mousePosition);\n        _this.setState({\n          pixelDelta: [_this._mousePosition[0] - _this._dragStart[0], _this._mousePosition[1] - _this._dragStart[1]]\n        }, NOOP);\n      }\n    };\n\n    _this.handleMouseUp = function (event) {\n      if (!_this._containerRef) {\n        _this._mouseDown = false;\n        return;\n      }\n      var pixelDelta = _this.state.pixelDelta;\n\n\n      if (_this._mouseDown) {\n        _this._mouseDown = false;\n\n        var pixel = getMousePixel(_this._containerRef, event);\n\n        if (_this.props.onClick && (!event.target || !parentHasClass(event.target, 'pigeon-click-block')) && (!pixelDelta || Math.abs(pixelDelta[0]) + Math.abs(pixelDelta[1]) <= CLICK_TOLERANCE)) {\n          var latLng = _this.pixelToLatLng(pixel);\n          _this.props.onClick({ event: event, latLng: latLng, pixel: pixel });\n          _this.setState({ pixelDelta: null }, NOOP);\n        } else {\n          var _this$sendDeltaChange2 = _this.sendDeltaChange(),\n              center = _this$sendDeltaChange2.center,\n              zoom = _this$sendDeltaChange2.zoom;\n\n          _this.throwAfterMoving(pixel, center, zoom);\n        }\n      }\n    };\n\n    _this.stopTrackingMoveEvents = function () {\n      _this._moveEvents = [];\n    };\n\n    _this.trackMoveEvents = function (coords) {\n      var timestamp = performanceNow();\n\n      if (_this._moveEvents.length === 0 || timestamp - _this._moveEvents[_this._moveEvents.length - 1].timestamp > 40) {\n        _this._moveEvents.push({ timestamp: timestamp, coords: coords });\n        if (_this._moveEvents.length > 2) {\n          _this._moveEvents.shift();\n        }\n      }\n    };\n\n    _this.throwAfterMoving = function (coords, center, zoom) {\n      var _this$state4 = _this.state,\n          width = _this$state4.width,\n          height = _this$state4.height;\n      var animate = _this.props.animate;\n\n\n      var timestamp = performanceNow();\n      var lastEvent = _this._moveEvents.shift();\n\n      if (lastEvent && animate) {\n        var deltaMs = Math.max(timestamp - lastEvent.timestamp, 1);\n\n        var delta = [(coords[0] - lastEvent.coords[0]) / deltaMs * 120, (coords[1] - lastEvent.coords[1]) / deltaMs * 120];\n\n        var distance = Math.sqrt(delta[0] * delta[0] + delta[1] * delta[1]);\n\n        if (distance > MIN_DRAG_FOR_THROW) {\n          var diagonal = Math.sqrt(width * width + height * height);\n\n          var throwTime = DIAGONAL_THROW_TIME * distance / diagonal;\n\n          var lng = tile2lng(lng2tile(center[1], zoom) - delta[0] / 256.0, zoom);\n          var lat = tile2lat(lat2tile(center[0], zoom) - delta[1] / 256.0, zoom);\n\n          _this.setCenterZoomTarget([lat, lng], zoom, false, null, throwTime);\n        }\n      }\n\n      _this.stopTrackingMoveEvents();\n    };\n\n    _this.sendDeltaChange = function () {\n      var _this$state5 = _this.state,\n          center = _this$state5.center,\n          zoom = _this$state5.zoom,\n          pixelDelta = _this$state5.pixelDelta,\n          zoomDelta = _this$state5.zoomDelta;\n\n\n      var lat = center[0];\n      var lng = center[1];\n\n      if (pixelDelta || zoomDelta !== 0) {\n        lng = tile2lng(lng2tile(center[1], zoom + zoomDelta) - (pixelDelta ? pixelDelta[0] / 256.0 : 0), zoom + zoomDelta);\n        lat = tile2lat(lat2tile(center[0], zoom + zoomDelta) - (pixelDelta ? pixelDelta[1] / 256.0 : 0), zoom + zoomDelta);\n        _this.setCenterZoom([lat, lng], zoom + zoomDelta);\n      }\n\n      _this.setState({\n        pixelDelta: null,\n        zoomDelta: 0\n      }, NOOP);\n\n      return {\n        center: _this.limitCenterAtZoom([lat, lng], zoom + zoomDelta),\n        zoom: zoom + zoomDelta\n      };\n    };\n\n    _this.getBounds = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.zoomPlusDelta();\n      var _this$state6 = _this.state,\n          width = _this$state6.width,\n          height = _this$state6.height;\n\n\n      return {\n        ne: _this.pixelToLatLng([width - 1, 0], center, zoom),\n        sw: _this.pixelToLatLng([0, height - 1], center, zoom)\n      };\n    };\n\n    _this.syncToProps = function () {\n      var center = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : _this.state.center;\n      var zoom = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.zoom;\n      var onBoundsChanged = _this.props.onBoundsChanged;\n\n\n      if (onBoundsChanged) {\n        var bounds = _this.getBounds(center, zoom);\n\n        onBoundsChanged({ center: center, zoom: zoom, bounds: bounds, initial: !_this._boundsSynced });\n\n        _this._boundsSynced = true;\n      }\n    };\n\n    _this.handleWheel = function (event) {\n      var _this$props2 = _this.props,\n          mouseEvents = _this$props2.mouseEvents,\n          metaWheelZoom = _this$props2.metaWheelZoom,\n          zoomSnap = _this$props2.zoomSnap,\n          animate = _this$props2.animate;\n\n\n      if (!mouseEvents) {\n        return;\n      }\n\n      if (!metaWheelZoom || event.metaKey) {\n        event.preventDefault();\n\n        var addToZoom = -event.deltaY / SCROLL_PIXELS_FOR_ZOOM_LEVEL;\n\n        if (!zoomSnap && _this._zoomTarget) {\n          var stillToAdd = _this._zoomTarget - _this.state.zoom;\n          _this.zoomAroundMouse(addToZoom + stillToAdd, event);\n        } else {\n          if (animate) {\n            _this.zoomAroundMouse(addToZoom, event);\n          } else {\n            if (!_this._lastWheel || performanceNow() - _this._lastWheel > ANIMATION_TIME) {\n              _this._lastWheel = performanceNow();\n              _this.zoomAroundMouse(addToZoom, event);\n            }\n          }\n        }\n      } else {\n        _this.showWarning('wheel');\n      }\n    };\n\n    _this.showWarning = function (warningType) {\n      if (!_this.state.showWarning || _this.state.warningType !== warningType) {\n        _this.setState({ showWarning: true, warningType: warningType });\n      }\n\n      if (_this._warningClearTimeout) {\n        window.clearTimeout(_this._warningClearTimeout);\n      }\n      _this._warningClearTimeout = window.setTimeout(_this.clearWarning, WARNING_DISPLAY_TIMEOUT);\n    };\n\n    _this.clearWarning = function () {\n      if (_this.state.showWarning) {\n        _this.setState({ showWarning: false });\n      }\n    };\n\n    _this.zoomAroundMouse = function (zoomDiff, event) {\n      if (!_this._containerRef) {\n        return;\n      }\n      var zoom = _this.state.zoom;\n      var _this$props3 = _this.props,\n          minZoom = _this$props3.minZoom,\n          maxZoom = _this$props3.maxZoom,\n          zoomSnap = _this$props3.zoomSnap;\n\n\n      _this._mousePosition = getMousePixel(_this._containerRef, event);\n\n      if (!_this._mousePosition || zoom === minZoom && zoomDiff < 0 || zoom === maxZoom && zoomDiff > 0) {\n        return;\n      }\n\n      var latLngNow = _this.pixelToLatLng(_this._mousePosition);\n\n      var zoomTarget = zoom + zoomDiff;\n      if (zoomSnap) {\n        zoomTarget = zoomDiff < 0 ? Math.floor(zoomTarget) : Math.ceil(zoomTarget);\n      }\n      zoomTarget = Math.max(minZoom, Math.min(zoomTarget, maxZoom));\n\n      _this.setCenterZoomTarget(null, zoomTarget, false, latLngNow);\n    };\n\n    _this.zoomPlusDelta = function () {\n      return _this.state.zoom + _this.state.zoomDelta;\n    };\n\n    _this.pixelToLatLng = function (pixel) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state7 = _this.state,\n          width = _this$state7.width,\n          height = _this$state7.height,\n          pixelDelta = _this$state7.pixelDelta;\n\n\n      var pointDiff = [(pixel[0] - width / 2 - (pixelDelta ? pixelDelta[0] : 0)) / 256.0, (pixel[1] - height / 2 - (pixelDelta ? pixelDelta[1] : 0)) / 256.0];\n\n      var tileX = lng2tile(center[1], zoom) + pointDiff[0];\n      var tileY = lat2tile(center[0], zoom) + pointDiff[1];\n\n      return [Math.max(absoluteMinMax[0], Math.min(absoluteMinMax[1], tile2lat(tileY, zoom))), Math.max(absoluteMinMax[2], Math.min(absoluteMinMax[3], tile2lng(tileX, zoom)))];\n    };\n\n    _this.latLngToPixel = function (latLng) {\n      var center = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : _this.state.center;\n      var zoom = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _this.zoomPlusDelta();\n      var _this$state8 = _this.state,\n          width = _this$state8.width,\n          height = _this$state8.height,\n          pixelDelta = _this$state8.pixelDelta;\n\n\n      var tileCenterX = lng2tile(center[1], zoom);\n      var tileCenterY = lat2tile(center[0], zoom);\n\n      var tileX = lng2tile(latLng[1], zoom);\n      var tileY = lat2tile(latLng[0], zoom);\n\n      return [(tileX - tileCenterX) * 256.0 + width / 2 + (pixelDelta ? pixelDelta[0] : 0), (tileY - tileCenterY) * 256.0 + height / 2 + (pixelDelta ? pixelDelta[1] : 0)];\n    };\n\n    _this.calculateZoomCenter = function (center, coords, oldZoom, newZoom) {\n      var _this$state9 = _this.state,\n          width = _this$state9.width,\n          height = _this$state9.height;\n\n\n      var pixelBefore = _this.latLngToPixel(coords, center, oldZoom);\n      var pixelAfter = _this.latLngToPixel(coords, center, newZoom);\n\n      var newCenter = _this.pixelToLatLng([width / 2 + pixelAfter[0] - pixelBefore[0], height / 2 + pixelAfter[1] - pixelBefore[1]], center, newZoom);\n\n      return _this.limitCenterAtZoom(newCenter, newZoom);\n    };\n\n    _this.setRef = function (dom) {\n      _this._containerRef = dom;\n    };\n\n    _this.syncToProps = debounce(_this.syncToProps, DEBOUNCE_DELAY);\n\n    _this._mousePosition = null;\n    _this._dragStart = null;\n    _this._mouseDown = false;\n    _this._moveEvents = [];\n    _this._lastClick = null;\n    _this._lastTap = null;\n    _this._touchStartPixel = null;\n\n    _this._isAnimating = false;\n    _this._animationStart = null;\n    _this._animationEnd = null;\n    _this._centerTarget = null;\n    _this._zoomTarget = null;\n\n    // When users are using uncontrolled components we have to keep this\n    // so we can know if we should call onBoundsChanged\n    _this._lastZoom = props.defaultZoom ? props.defaultZoom : props.zoom;\n    _this._lastCenter = props.defaultCenter ? props.defaultCenter : props.center;\n    _this._boundsSynced = false;\n    _this._minMaxCache = null;\n\n    _this.state = {\n      zoom: _this._lastZoom,\n      center: _this._lastCenter,\n      width: props.width || props.defaultWidth,\n      height: props.height || props.defaultHeight,\n      zoomDelta: 0,\n      pixelDelta: null,\n      oldTiles: [],\n      showWarning: false,\n      warningType: null\n    };\n    return _this;\n  }\n\n  Map.prototype.componentDidMount = function componentDidMount() {\n    this.props.mouseEvents && this.bindMouseEvents();\n    this.props.touchEvents && this.bindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      // A height:100% container div often results in height=0 being returned on mount.\n      // So ask again once everything is painted.\n      if (!this.updateWidthHeight()) {\n        requestAnimationFrame(this.updateWidthHeight);\n      }\n      this.bindResizeEvent();\n      this.bindWheelEvent();\n    }\n\n    this.syncToProps();\n  };\n\n  Map.prototype.componentWillUnmount = function componentWillUnmount() {\n    this.props.mouseEvents && this.unbindMouseEvents();\n    this.props.touchEvents && this.unbindTouchEvents();\n\n    if (!this.props.width || !this.props.height) {\n      this.unbindResizeEvent();\n      this.unbindWheelEvent();\n    }\n  };\n\n  Map.prototype.componentDidUpdate = function componentDidUpdate(prevProps) {\n    if (this.props.mouseEvents !== prevProps.mouseEvents) {\n      this.props.mouseEvents ? this.bindMouseEvents() : this.unbindMouseEvents();\n    }\n\n    if (this.props.touchEvents !== prevProps.touchEvents) {\n      this.props.touchEvents ? this.bindTouchEvents() : this.unbindTouchEvents();\n    }\n\n    if (this.props.width && this.props.width !== prevProps.width) {\n      this.setState({ width: this.props.width });\n    }\n\n    if (this.props.height && this.props.height !== prevProps.height) {\n      this.setState({ height: this.props.height });\n    }\n\n    if (!this.props.center && !this.props.zoom) {\n      // if the user isn't controlling neither zoom nor center we don't have to update.\n      return;\n    }\n    if ((!this.props.center || this.props.center[0] === prevProps.center[0] && this.props.center[1] === prevProps.center[1]) && this.props.zoom === prevProps.zoom) {\n      // if the user is controlling either zoom or center but nothing changed\n      // we don't have to update aswell\n      return;\n    }\n\n    var currentCenter = this._isAnimating ? this._centerTarget : this.state.center;\n    var currentZoom = this._isAnimating ? this._zoomTarget : this.state.zoom;\n\n    var nextCenter = this.props.center || currentCenter; // prevent the rare null errors\n    var nextZoom = this.props.zoom || currentZoom;\n\n    if (Math.abs(nextZoom - currentZoom) > 0.001 || Math.abs(nextCenter[0] - currentCenter[0]) > 0.0001 || Math.abs(nextCenter[1] - currentCenter[1]) > 0.0001) {\n      this.setCenterZoomTarget(nextCenter, nextZoom, true);\n    }\n  };\n\n  // main logic when changing coordinates\n\n\n  Map.prototype.coordsInside = function coordsInside(pixel) {\n    var _state = this.state,\n        width = _state.width,\n        height = _state.height;\n\n\n    if (pixel[0] < 0 || pixel[1] < 0 || pixel[0] >= width || pixel[1] >= height) {\n      return false;\n    }\n\n    var parent = this._containerRef;\n    var pos = parentPosition(parent);\n    var element = document.elementFromPoint(pixel[0] + pos.x, pixel[1] + pos.y);\n\n    return parent === element || parent.contains(element);\n  };\n\n  // https://www.bennadel.com/blog/1856-using-jquery-s-animate-step-callback-function-to-create-custom-animations.htm\n\n\n  // tools\n\n  // ref\n\n  // data to display the tiles\n\n  Map.prototype.tileValues = function tileValues(state) {\n    var center = state.center,\n        zoom = state.zoom,\n        pixelDelta = state.pixelDelta,\n        zoomDelta = state.zoomDelta,\n        width = state.width,\n        height = state.height;\n\n\n    var roundedZoom = Math.round(zoom + (zoomDelta || 0));\n    var zoomDiff = zoom + (zoomDelta || 0) - roundedZoom;\n\n    var scale = Math.pow(2, zoomDiff);\n    var scaleWidth = width / scale;\n    var scaleHeight = height / scale;\n\n    var tileCenterX = lng2tile(center[1], roundedZoom) - (pixelDelta ? pixelDelta[0] / 256.0 / scale : 0);\n    var tileCenterY = lat2tile(center[0], roundedZoom) - (pixelDelta ? pixelDelta[1] / 256.0 / scale : 0);\n\n    var halfWidth = scaleWidth / 2 / 256.0;\n    var halfHeight = scaleHeight / 2 / 256.0;\n\n    var tileMinX = Math.floor(tileCenterX - halfWidth);\n    var tileMaxX = Math.floor(tileCenterX + halfWidth);\n\n    var tileMinY = Math.floor(tileCenterY - halfHeight);\n    var tileMaxY = Math.floor(tileCenterY + halfHeight);\n\n    return {\n      tileMinX: tileMinX,\n      tileMaxX: tileMaxX,\n      tileMinY: tileMinY,\n      tileMaxY: tileMaxY,\n      tileCenterX: tileCenterX,\n      tileCenterY: tileCenterY,\n      roundedZoom: roundedZoom,\n      zoomDelta: zoomDelta || 0,\n      scaleWidth: scaleWidth,\n      scaleHeight: scaleHeight,\n      scale: scale\n    };\n  };\n\n  // display the tiles\n\n  Map.prototype.renderTiles = function renderTiles() {\n    var _this2 = this;\n\n    var oldTiles = this.state.oldTiles;\n    var dprs = this.props.dprs;\n\n    var mapUrl = this.props.provider || wikimedia;\n\n    var _tileValues = this.tileValues(this.state),\n        tileMinX = _tileValues.tileMinX,\n        tileMaxX = _tileValues.tileMaxX,\n        tileMinY = _tileValues.tileMinY,\n        tileMaxY = _tileValues.tileMaxY,\n        tileCenterX = _tileValues.tileCenterX,\n        tileCenterY = _tileValues.tileCenterY,\n        roundedZoom = _tileValues.roundedZoom,\n        scaleWidth = _tileValues.scaleWidth,\n        scaleHeight = _tileValues.scaleHeight,\n        scale = _tileValues.scale;\n\n    var tiles = [];\n\n    for (var i = 0; i < oldTiles.length; i++) {\n      var old = oldTiles[i];\n      var zoomDiff = old.roundedZoom - roundedZoom;\n\n      if (Math.abs(zoomDiff) > 4 || zoomDiff === 0) {\n        continue;\n      }\n\n      var pow = 1 / Math.pow(2, zoomDiff);\n      var xDiff = -(tileMinX - old.tileMinX * pow) * 256;\n      var yDiff = -(tileMinY - old.tileMinY * pow) * 256;\n\n      var _xMin = Math.max(old.tileMinX, 0);\n      var _yMin = Math.max(old.tileMinY, 0);\n      var _xMax = Math.min(old.tileMaxX, Math.pow(2, old.roundedZoom) - 1);\n      var _yMax = Math.min(old.tileMaxY, Math.pow(2, old.roundedZoom) - 1);\n\n      for (var x = _xMin; x <= _xMax; x++) {\n        for (var y = _yMin; y <= _yMax; y++) {\n          tiles.push({\n            key: x + '-' + y + '-' + old.roundedZoom,\n            url: mapUrl(x, y, old.roundedZoom),\n            srcSet: srcSet(dprs, mapUrl, x, y, old.roundedZoom),\n            left: xDiff + (x - old.tileMinX) * 256 * pow,\n            top: yDiff + (y - old.tileMinY) * 256 * pow,\n            width: 256 * pow,\n            height: 256 * pow,\n            active: false\n          });\n        }\n      }\n    }\n\n    var xMin = Math.max(tileMinX, 0);\n    var yMin = Math.max(tileMinY, 0);\n    var xMax = Math.min(tileMaxX, Math.pow(2, roundedZoom) - 1);\n    var yMax = Math.min(tileMaxY, Math.pow(2, roundedZoom) - 1);\n\n    for (var _x13 = xMin; _x13 <= xMax; _x13++) {\n      for (var _y = yMin; _y <= yMax; _y++) {\n        tiles.push({\n          key: _x13 + '-' + _y + '-' + roundedZoom,\n          url: mapUrl(_x13, _y, roundedZoom),\n          srcSet: srcSet(dprs, mapUrl, _x13, _y, roundedZoom),\n          left: (_x13 - tileMinX) * 256,\n          top: (_y - tileMinY) * 256,\n          width: 256,\n          height: 256,\n          active: true\n        });\n      }\n    }\n\n    var boxStyle = {\n      width: scaleWidth,\n      height: scaleHeight,\n      position: 'absolute',\n      top: 0,\n      left: 0,\n      overflow: 'hidden',\n      willChange: 'transform',\n      transform: 'scale(' + scale + ', ' + scale + ')',\n      transformOrigin: 'top left'\n    };\n    var boxClassname = this.props.boxClassname || '';\n\n    var left = -((tileCenterX - tileMinX) * 256 - scaleWidth / 2);\n    var top = -((tileCenterY - tileMinY) * 256 - scaleHeight / 2);\n\n    var tilesStyle = {\n      position: 'absolute',\n      width: (tileMaxX - tileMinX + 1) * 256,\n      height: (tileMaxY - tileMinY + 1) * 256,\n      willChange: 'transform',\n      transform: 'translate(' + left + 'px, ' + top + 'px)'\n    };\n\n    return React__default.createElement(\n      'div',\n      { style: boxStyle, className: boxClassname },\n      React__default.createElement(\n        'div',\n        { style: tilesStyle },\n        tiles.map(function (tile) {\n          return React__default.createElement('img', {\n            key: tile.key,\n            src: tile.url,\n            srcSet: tile.srcSet,\n            width: tile.width,\n            height: tile.height,\n            onLoad: function onLoad() {\n              return _this2.imageLoaded(tile.key);\n            },\n            style: { position: 'absolute', left: tile.left, top: tile.top, willChange: 'transform', transform: tile.transform, transformOrigin: 'top left', opacity: 1 } });\n        })\n      )\n    );\n  };\n\n  Map.prototype.renderOverlays = function renderOverlays() {\n    var _this3 = this;\n\n    var _state2 = this.state,\n        width = _state2.width,\n        height = _state2.height,\n        center = _state2.center;\n\n\n    var mapState = {\n      bounds: this.getBounds(),\n      zoom: this.zoomPlusDelta(),\n      center: center,\n      width: width,\n      height: height\n    };\n\n    var childrenWithProps = React__default.Children.map(this.props.children, function (child) {\n      if (!child) {\n        return null;\n      }\n\n      if (typeof child.type === 'string') {\n        return child;\n      }\n\n      var _child$props = child.props,\n          anchor = _child$props.anchor,\n          position = _child$props.position,\n          offset = _child$props.offset;\n\n\n      var c = _this3.latLngToPixel(anchor || position || center);\n\n      return React__default.cloneElement(child, {\n        left: c[0] - (offset ? offset[0] : 0),\n        top: c[1] - (offset ? offset[1] : 0),\n        latLngToPixel: _this3.latLngToPixel,\n        pixelToLatLng: _this3.pixelToLatLng,\n        mapState: mapState\n      });\n    });\n\n    var childrenStyle = {\n      position: 'absolute',\n      width: width,\n      height: height,\n      top: 0,\n      left: 0\n    };\n\n    return React__default.createElement(\n      'div',\n      { style: childrenStyle },\n      childrenWithProps\n    );\n  };\n\n  Map.prototype.renderAttribution = function renderAttribution() {\n    var _props = this.props,\n        attribution = _props.attribution,\n        attributionPrefix = _props.attributionPrefix;\n\n\n    if (attribution === false) {\n      return null;\n    }\n\n    var style = {\n      position: 'absolute',\n      bottom: 0,\n      right: 0,\n      fontSize: '11px',\n      padding: '2px 5px',\n      background: 'rgba(255, 255, 255, 0.7)',\n      fontFamily: \"'Helvetica Neue', Helvetica, Arial, sans-serif\",\n      color: '#333'\n    };\n\n    var linkStyle = {\n      color: '#0078A8',\n      textDecoration: 'none'\n    };\n\n    return React__default.createElement(\n      'div',\n      { key: 'attr', className: 'pigeon-attribution', style: style },\n      attributionPrefix === false ? null : React__default.createElement(\n        'span',\n        null,\n        attributionPrefix || React__default.createElement(\n          'a',\n          { href: 'https://pigeon-maps.js.org/', style: linkStyle },\n          'Pigeon'\n        ),\n        ' | '\n      ),\n      attribution || React__default.createElement(\n        'span',\n        null,\n        ' © ',\n        React__default.createElement(\n          'a',\n          { href: 'https://www.openstreetmap.org/copyright', style: linkStyle },\n          'OpenStreetMap'\n        ),\n        ' contributors'\n      )\n    );\n  };\n\n  Map.prototype.renderWarning = function renderWarning() {\n    var _props2 = this.props,\n        metaWheelZoom = _props2.metaWheelZoom,\n        metaWheelZoomWarning = _props2.metaWheelZoomWarning,\n        twoFingerDrag = _props2.twoFingerDrag,\n        twoFingerDragWarning = _props2.twoFingerDragWarning,\n        warningZIndex = _props2.warningZIndex;\n    var _state3 = this.state,\n        showWarning = _state3.showWarning,\n        warningType = _state3.warningType,\n        width = _state3.width,\n        height = _state3.height;\n\n\n    if (metaWheelZoom && metaWheelZoomWarning || twoFingerDrag && twoFingerDragWarning) {\n      var style = {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: width,\n        height: height,\n        overflow: 'hidden',\n        pointerEvents: 'none',\n        opacity: showWarning ? 100 : 0,\n        transition: 'opacity 300ms',\n        background: 'rgba(0,0,0,0.5)',\n        color: '#fff',\n        display: 'flex',\n        justifyContent: 'center',\n        alignItems: 'center',\n        fontSize: 22,\n        fontFamily: '\"Arial\", sans-serif',\n        textAlign: 'center',\n        zIndex: warningZIndex\n      };\n\n      var meta = typeof window !== 'undefined' && window.navigator && window.navigator.platform.toUpperCase().indexOf('MAC') >= 0 ? '⌘' : '⊞';\n\n      var warningText = warningType === 'fingers' ? twoFingerDragWarning : metaWheelZoomWarning;\n\n      return React__default.createElement(\n        'div',\n        { style: style },\n        warningText.replace('META', meta)\n      );\n    } else {\n      return null;\n    }\n  };\n\n  Map.prototype.render = function render() {\n    var _props3 = this.props,\n        touchEvents = _props3.touchEvents,\n        twoFingerDrag = _props3.twoFingerDrag;\n    var _state4 = this.state,\n        width = _state4.width,\n        height = _state4.height;\n\n\n    var containerStyle = {\n      width: this.props.width ? width : '100%',\n      height: this.props.height ? height : '100%',\n      position: 'relative',\n      display: 'inline-block',\n      overflow: 'hidden',\n      background: '#dddddd',\n      touchAction: touchEvents ? twoFingerDrag ? 'pan-x pan-y' : 'none' : 'auto'\n    };\n\n    var hasSize = !!(width && height);\n\n    return React__default.createElement(\n      'div',\n      { style: containerStyle, ref: this.setRef },\n      hasSize && this.renderTiles(),\n      hasSize && this.renderOverlays(),\n      hasSize && this.renderAttribution(),\n      hasSize && this.renderWarning()\n    );\n  };\n\n  return Map;\n}(React.Component);\n\nMap.defaultProps = {\n  animate: true,\n  metaWheelZoom: false,\n  metaWheelZoomWarning: 'Use META+wheel to zoom!',\n  twoFingerDrag: false,\n  twoFingerDragWarning: 'Use two fingers to move the map',\n  zoomSnap: true,\n  mouseEvents: true,\n  touchEvents: true,\n  warningZIndex: 100,\n  animateMaxScreens: 5,\n  minZoom: 1,\n  maxZoom: 18,\n  limitBounds: 'center',\n  dprs: []\n};\nprocess.env.NODE_ENV !== \"production\" ? Map.propTypes = {\n  center: PropTypes.array,\n  defaultCenter: PropTypes.array,\n\n  zoom: PropTypes.number,\n  defaultZoom: PropTypes.number,\n\n  width: PropTypes.number,\n  defaultWidth: PropTypes.number,\n\n  height: PropTypes.number,\n  defaultHeight: PropTypes.number,\n\n  provider: PropTypes.func,\n  dprs: PropTypes.array,\n  children: PropTypes.node,\n\n  animate: PropTypes.bool,\n  animateMaxScreens: PropTypes.number,\n\n  minZoom: PropTypes.number,\n  maxZoom: PropTypes.number,\n\n  metaWheelZoom: PropTypes.bool,\n  metaWheelZoomWarning: PropTypes.string,\n  twoFingerDrag: PropTypes.bool,\n  twoFingerDragWarning: PropTypes.string,\n  warningZIndex: PropTypes.number,\n\n  attribution: PropTypes.any,\n  attributionPrefix: PropTypes.any,\n\n  zoomSnap: PropTypes.bool,\n  mouseEvents: PropTypes.bool,\n  touchEvents: PropTypes.bool,\n\n  onClick: PropTypes.func,\n  onBoundsChanged: PropTypes.func,\n  onAnimationStart: PropTypes.func,\n  onAnimationStop: PropTypes.func,\n\n  // will be set to \"edge\" from v0.12 onward, defaulted to \"center\" before\n  limitBounds: PropTypes.oneOf(['center', 'edge'])\n} : void 0;\n\nmodule.exports = Map;\n"],"mappings":"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"},"metadata":{},"sourceType":"script"}